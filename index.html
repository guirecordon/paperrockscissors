<!DOCTYPE html>
<html>
    <head>
        <title>Rock Paper Scissors</title>
    </head>
    <body>
        <script>
             
            function computerPlay() {

                computerchoice = Math.random();

                if (computerchoice < 0.3333333333333333) {
                    Selection = "rock";
                 } else if(computerchoice > 0.6666666666666666) {
                    Selection = "scissors";
                 } else {
                    Selection = "paper";
                 }
                 return Selection;
                }
            

            function playRound(playerSelection, computerSelection) {
                if (playerSelection == computerSelection) {
                    gameDisplay = "It's a tie!" + playerSelection + " ties " + computerSelection;
                } else if(playerSelection == "paper" && computerSelection == "rock") {
                    gameDisplay = "You win! " + playerSelection + " beats " + computerSelection;
                } else if (playerSelection == "scissors" && computerSelection == "paper") {
                    gameDisplay = "You win! " + playerSelection + " beats " + computerSelection;
                } else if (playerSelection == "rock" && computerSelection == "scissors") {
                    gameDisplay = "You win! " + playerSelection + " beats " + computerSelection;
                } else {
                    gameDisplay = "You lose! " + computerSelection + " beats " + playerSelection;
                }
                return gameDisplay;
            }


            // Eu queria fazer esse aqui funcionar primeiro, porque tá sem o loop. Como ainda não vi
            //loop eu queria fazer assim. 


            //O resultado da função playRound(playerSelection, computerSelection) é uma mensagem 
            // "You win" ou "You lose", daí eu uso a função charAt(4) para pegar a letra "w" no caso de
            // vitória ou o "l" no caso de derrota. É meio Tabajara, mas parece que funciona. Enfim, o meu
            // problema é que o prompt só aparece uma vez, na primeira, e depois roda todos os resultados
            //iguais. 

            //Eu commented out esse código aqui em baixo e acabei fazendo um loop lá em baixo mesmo, que é
            // o que tá rodando agora, mas o problema é o mesmo nos dois códigos.


           /*
           
            function game() {
                let round1 = playRound(playerSelection, computerSelection);
                let win = 0;
                let loss = 0;
                let tie = 0;

                if (round1.charAt(4) == "w") {
                    win++; 
                } else if (round1.charAt(4) == "l") {
                    loss++;
                } else {
                    tie++;
                }
                
                console.log(" --  Round 1  -- " + round1);
                console.log("Score: win: " + win + " ,losses: " + loss + " ,ties: " + tie + ". Next round!");
             


                let round2 = playRound(playerSelection, computerSelection);

                if (round2.charAt(4) == "w") {
                    win++; 
                } else if (round2.charAt(4) == "l") {
                    loss++;
                } else {
                    tie++;
                }

                console.log(" --  Round 2  -- " + round2);
                console.log("Score: win: " + win + " ,losses: " + loss + " ,ties: " + tie + ". Next round!");
             

                let round3 = playRound(playerSelection, computerSelection);

                if (round3.charAt(4) == "w") {
                    win++;
                } else if (round3.charAt(4) == "l") {
                    loss++;
                } else {
                    tie++;
                }

                console.log(" --  Round 3  -- " + round3);
                console.log("Score: win: " + win + " ,losses: " + loss + " ,ties: " + tie + ". Next round!");
               


                let round4 = playRound(playerSelection, computerSelection);

                if (round4.charAt(4) == "w") {
                    win++;
                } else if (round4.charAt(4) == "l") {
                    loss++;
                } else {
                    tie++;
                }

                console.log(" --  Round 4  -- " + round4);
                console.log("Score: win: " + win + " ,losses: " + loss + " ,ties: " + tie + ". Next round!");
               

                let round5 = playRound(playerSelection, computerSelection);

                if (round5.charAt(4) == "w") {
                    win++;
                } else if (round5.charAt(4) == "l") {
                    loss++;
                } else {
                    tie++;
                } 
                
                console.log(" --  Round 5  -- " + round5);
                console.log("Score: win: " + win + " ,losses: " + loss + " ,ties: " + tie + ". Next round!");
            
            }


*/


            function game() { 
                
                    for (let i=1; i<6; i++) {
                        let round = playRound(playerSelection, computerSelection);
                        if (round.charAt(4) == "w") {
                            win++;
                        } else if(round.charAt(4) == "l") {
                            loss++;
                        } else {
                            tie++;
                        }
                        
                        console.log(round);
                        console.log("  ROUND  " + i + " Score: WIN: "+win+" LOSSES: "+loss+" TIES: "+tie+". Next round.")                        
                    }

            }





            const computerSelection = computerPlay();
            let playerSelection = prompt("Choose 'Rock', 'Paper' or 'Scissors':", "");
            
            console.log(game());



            </script>
    </body>
</html>